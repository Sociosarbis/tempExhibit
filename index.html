<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width:device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scale=no;">
    <script src="/static/js/hls.min.js"></script>
    <style>
    * {
        font-size: 14px;
    }
    body {
        margin: 0;
    }
    </style>
</head>
<body style="padding: 10px;">
    <div>
        <div style="display:flex;margin-bottom: 20px;">
            <input style="width:100%" id="url-input" placeholder="mp4视频链接"></input>
            <input id="replace-video-button" type="button" value="替换视频"></input>
        </div>
        <video style="width: 100%;" id="player" src="" controls="true" crossorigin="anonymous"></video>
    </div>
    <script>
        const replaceButton = document.getElementById('replace-video-button')
        const player = document.getElementById('player')
        const urlInput = document.getElementById('url-input')
        const hls = new Hls();
        hls.on(Hls.Events.MANIFEST_PARSED, function () {
            player.play();
        });
        replaceButton.addEventListener('click', function () {
            hls.detachMedia()
            if (/\.m3u8/.test(urlInput.value)) {
                hls.attachMedia(player)
                hls.loadSource(urlInput.value)
            } else {
                player.setAttribute('src', urlInput.value)
                player.play()
            }
        })
    </script>
</body>
</html>